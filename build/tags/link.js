define(["jquery","value","helpers","hook","template"],function(a,b,c,d,e){function f(f){this.htmlAttributes=f.htmlAttributes,this.id=_.uniqueId("gofer"),this.buttonId=_.uniqueId("gofer"),this.hrefId=_.uniqueId("gofer"),this.data=b({}),this.text=b(""),this.text.subscribe(_.bind(function(a){this.data.update("text",a)},this)),this.href=b(),this.href.subscribe(_.bind(function(a){this.data.update("href",a)},this))(f.href),f.mix&&this.data.modify(c(f.mix)),this.hidden=f.hidden,this.note=f.note,f.required&&d("submit",_.bind(function(){return this.text()&&this.href()},this)),d("dom",_.bind(function(){var b=a("#"+this.id).on("keyup",_.bind(function(){this.text(b.val())},this)),c=a("#"+this.hrefId).on("keyup",_.bind(function(){this.href(c.val())},this));a("#"+this.buttonId).on("click",function(){c.toggle()})},this)),e("link",'<% if(note) { %> <div class="gofer-note"><%= note %></div><% } %><input type="text" id="<%= id %>" value="<%= text() %>" <%= htmlAttributes %> ><input type="button" id="<%= buttonId %>"><input type="text" id="<%= hrefId %>" value="<%= href() %>">')}return _.extend(f.prototype,{edit:function(a){return e("link",this)},view:function(){return this.hidden?"":'<a href="'+this.href()+'" title="">'+this.text()+"</a>"}}),f})