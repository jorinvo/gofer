define(["manage"],function(a){function b(b){function f(a){return _.isUndefined(a)||(c=a,h()),g()}function g(){return _.compose.apply(this,d)(c)}function h(){var a=g();_.each(e,function(b){b(a)})}var c=b,d=[],e=[];return _.extend(f,{modify:function(b){return d=a(d,b),this},subscribe:function(b){return e=a(e,b),this},trigger:function(){return h(),this},update:function(a){var b=arguments;return _.isArray(c)?b.length===2&&(_.isNumber(b[0])||_.isNumber(parseInt(b[0],10)))?c[b[0]]=b[1]:c=c.concat(_.isArray(a)?a:Array.prototype.slice.call(b)):_.isObject(c)?_.isUndefined(b[1])?_.isArray(a)?c[a[0]]=a[1]:_.extend(c,a):c[b[0]]=b[1]:c+=a,h(),this}}),f}return b})